<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.22-DEV" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  
  <title>Open Grid Engine &middot; Funnel</title>
  

  
  <link rel="stylesheet" href="https://ohsu-comp-bio.github.io/funnel/css/poole.css">
  <link rel="stylesheet" href="https://ohsu-comp-bio.github.io/funnel/css/monokai-sublime.css">
  <link rel="stylesheet" href="https://ohsu-comp-bio.github.io/funnel/css/syntax.css">
  <link rel="stylesheet" href="https://ohsu-comp-bio.github.io/funnel/css/theme.css">
  <link rel="stylesheet" href="https://ohsu-comp-bio.github.io/funnel/css/funnel.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://ohsu-comp-bio.github.io/funnel/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="https://ohsu-comp-bio.github.io/funnel/favicon.png">

  <script src="https://ohsu-comp-bio.github.io/funnel/js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

</head>
<body>

  <div class="global-header">
    <div class="global-header-container">
      <div class="global-header-home">
        <a href="https://ohsu-comp-bio.github.io/funnel/"><h1>Funnel</h1></a>
      </div>
      <ul class="global-header-nav">
          <li><a href="https://ohsu-comp-bio.github.io/funnel/install/">Install</a></li>
          <li><a href="https://ohsu-comp-bio.github.io/funnel/docs/">Docs</a></li>
          <li><a href="https://github.com/ohsu-comp-bio/funnel">GitHub</a></li>
        </ul>
      <div class="global-header-ohsucb">
        <a href="https://www.ohsu.edu/xd/education/schools/school-of-medicine/departments/computational-biology/"><h2>OHSU Comp. Bio.</h2></a>
      </div>
    </div>
  </div>


<div class="content section group">

  <div class="sidebar col span_3_of_12">
    <ul class="sidebar-nav">
      
      
        
        <li><a
          href="https://ohsu-comp-bio.github.io/funnel/docs/"
          class="sidebar-nav-item "
          >Overview</a></li>
          
        
        <li><a
          href="https://ohsu-comp-bio.github.io/funnel/install/"
          class="sidebar-nav-item "
          >Install</a></li>
          
        
        <li><a
          href="https://ohsu-comp-bio.github.io/funnel/docs/quickstart/"
          class="sidebar-nav-item "
          >Quickstart</a></li>
          
        
        <li><a
          href="https://ohsu-comp-bio.github.io/funnel/docs/config/"
          class="sidebar-nav-item "
          >Config</a></li>
          
        
        <li><a
          href="https://ohsu-comp-bio.github.io/funnel/docs/backends/"
          class="sidebar-nav-item "
          >Backends</a></li>
          
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/backends/local/"
                   class="sidebar-nav-item "
                >Local</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/backends/manual/"
                   class="sidebar-nav-item "
                >Manual</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/backends/google-cloud/"
                   class="sidebar-nav-item "
                >Google Cloud</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/backends/htcondor/"
                   class="sidebar-nav-item "
                >HTCondor</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/backends/grid-engine/"
                   class="sidebar-nav-item  active"
                >Open Grid Engine</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/backends/pbs-torque/"
                   class="sidebar-nav-item "
                >PBS/Torque</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/backends/slurm/"
                   class="sidebar-nav-item "
                >SLURM</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/backends/openstack/"
                   class="sidebar-nav-item "
                >OpenStack</a></li>
            </ul>
          </li>
          
          
        
        <li><a
          href="https://ohsu-comp-bio.github.io/funnel/docs/development/"
          class="sidebar-nav-item "
          >Development</a></li>
          
        
        <li><a
          href="https://ohsu-comp-bio.github.io/funnel/docs/design/"
          class="sidebar-nav-item "
          >Design</a></li>
          
        
        <li><a
          href="https://godoc.org/github.com/ohsu-comp-bio/funnel"
          class="sidebar-nav-item "
          >Reference</a></li>
          
        
        <li><a
          href="https://github.com/ohsu-comp-bio/funnel"
          class="sidebar-nav-item "
          >GitHub</a></li>
          
        
        <li><a
          href="https://gitter.im/ohsu-comp-bio/funnel"
          class="sidebar-nav-item "
          >Chat</a></li>
          
        
      
    </ul>
  </div>

  <div class="main col span_8_of_12">
    

<h1 id="open-grid-engine-sge">Open Grid Engine (SGE)</h1>

<p>Funnel can be configured to start workers via <a href="http://gridscheduler.sourceforge.net/documentation.html">Open Grid Engine</a>.</p>

<p>Workers will start, execute a single task, then exit immediately so that they don&rsquo;t
unfairly hold slots in the SGE queue. Funnel accesses SGE by making calls
to <code>qsub</code>.</p>

<p>The Funnel server process needs to run on the same machine as the SGE master.<br />
Configure Funnel to use SGE by including the following config:</p>

<pre><code class="language-YAML">Scheduler: gridengine
Backends:
  GridEngine: |<p style="margin-left: 3em">#!/bin/bash
#$ -N {{.WorkerId}}
#$ -o {{.WorkDir}}/funnel-worker-stdout
#$ -e {{.WorkDir}}/funnel-worker-stderr
{{if ne .Cpus 0 -}}
{{printf &#34;#$ -pe mpi %d&#34; .Cpus}}
{{- end}}
{{if ne .RamGb 0.0 -}}
{{printf &#34;#$ -l h_vmem=%.0fG&#34; .RamGb}}
{{- end}}
{{if ne .DiskGb 0.0 -}}
{{printf &#34;#$ -l h_fsize=%.0fG&#34; .DiskGb}}
{{- end}}

{{.Executable}} worker --config {{.WorkerConfig}}
</p>

</code></pre>

<p>The following variables are available for use in the template:</p>

<table>
<thead>
<tr>
<th align="left">Variable</th>
<th align="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">WorkerId</td>
<td align="left">funnel worker id</td>
</tr>

<tr>
<td align="left">Executable</td>
<td align="left">path to funnel binary</td>
</tr>

<tr>
<td align="left">WorkerConfig</td>
<td align="left">path to the funnel worker config file</td>
</tr>

<tr>
<td align="left">WorkDir</td>
<td align="left">funnel working directory</td>
</tr>

<tr>
<td align="left">Cpus</td>
<td align="left">requested cpu cores</td>
</tr>

<tr>
<td align="left">RamGb</td>
<td align="left">requested ram</td>
</tr>

<tr>
<td align="left">DiskGb</td>
<td align="left">requested free disk space</td>
</tr>

<tr>
<td align="left">Zone</td>
<td align="left">requested zone (could be used for queue name)</td>
</tr>

<tr>
<td align="left">Project</td>
<td align="left">project (could be used for account to charge)</td>
</tr>
</tbody>
</table>

<p>See <a href="https://golang.org/pkg/text/template">https://golang.org/pkg/text/template</a> for information on creating templates.</p>

<p>To start Funnel with a config file:</p>

<pre><code class="language-shell">$ funnel server --config ./your-config.yaml
</code></pre>

  </div>

</div>
</body>
</html>
