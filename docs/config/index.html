<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.20.3" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  
  <title>Config &middot; Funnel</title>
  

  
  <link rel="stylesheet" href="https://ohsu-comp-bio.github.io/funnel/css/poole.css">
  <link rel="stylesheet" href="https://ohsu-comp-bio.github.io/funnel/css/monokai-sublime.css">
  <link rel="stylesheet" href="https://ohsu-comp-bio.github.io/funnel/css/syntax.css">
  <link rel="stylesheet" href="https://ohsu-comp-bio.github.io/funnel/css/theme.css">
  <link rel="stylesheet" href="https://ohsu-comp-bio.github.io/funnel/css/funnel.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://ohsu-comp-bio.github.io/funnel/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="https://ohsu-comp-bio.github.io/funnel/favicon.png">

  <script src="https://ohsu-comp-bio.github.io/funnel/js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

</head>
<body>

  <div class="global-header">
    <div class="global-header-container">
      <div class="global-header-home">
        <a href="https://ohsu-comp-bio.github.io/funnel/"><h1>Funnel</h1></a>
      </div>
      <ul class="global-header-nav">
          <li><a href="https://ohsu-comp-bio.github.io/funnel/install/">Install</a></li>
          <li><a href="https://ohsu-comp-bio.github.io/funnel/docs/">Docs</a></li>
          <li><a href="https://github.com/ohsu-comp-bio/funnel">GitHub</a></li>
        </ul>
      <div class="global-header-ohsucb">
        <a href="https://www.ohsu.edu/xd/education/schools/school-of-medicine/departments/computational-biology/"><h2>OHSU Comp. Bio.</h2></a>
      </div>
    </div>
  </div>


<div class="content section group">

  <div class="sidebar col span_3_of_12">
    <ul class="sidebar-nav">
      
      
        
        <li><a
          href="https://ohsu-comp-bio.github.io/funnel/docs/"
          class="sidebar-nav-item "
          >Overview</a></li>
          
        
        <li><a
          href="https://ohsu-comp-bio.github.io/funnel/install/"
          class="sidebar-nav-item "
          >Install</a></li>
          
        
        <li><a
          href="https://ohsu-comp-bio.github.io/funnel/docs/quickstart/"
          class="sidebar-nav-item "
          >Quickstart</a></li>
          
        
        <li><a
          href="https://ohsu-comp-bio.github.io/funnel/docs/config/"
          class="sidebar-nav-item  active"
          >Config</a></li>
          
        
        <li><a
          href="https://ohsu-comp-bio.github.io/funnel/docs/backends/"
          class="sidebar-nav-item "
          >Backends</a></li>
          
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/backends/local/"
                   class="sidebar-nav-item "
                >Local</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/backends/manual/"
                   class="sidebar-nav-item "
                >Manual</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/backends/google-cloud/"
                   class="sidebar-nav-item "
                >Google Cloud</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/backends/htcondor/"
                   class="sidebar-nav-item "
                >HTCondor</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://ohsu-comp-bio.github.io/funnel/docs/backends/openstack/"
                   class="sidebar-nav-item "
                >OpenStack</a></li>
            </ul>
          </li>
          
          
        
        <li><a
          href="https://ohsu-comp-bio.github.io/funnel/docs/development/"
          class="sidebar-nav-item "
          >Development</a></li>
          
        
        <li><a
          href="https://ohsu-comp-bio.github.io/funnel/docs/design/"
          class="sidebar-nav-item "
          >Design</a></li>
          
        
        <li><a
          href="https://godoc.org/github.com/ohsu-comp-bio/funnel"
          class="sidebar-nav-item "
          >Reference</a></li>
          
        
        <li><a
          href="https://github.com/ohsu-comp-bio/funnel"
          class="sidebar-nav-item "
          >GitHub</a></li>
          
        
        <li><a
          href="https://gitter.im/ohsu-comp-bio/funnel"
          class="sidebar-nav-item "
          >Chat</a></li>
          
        
      
    </ul>
  </div>

  <div class="main col span_8_of_12">
    

<h1 id="configuration">Configuration</h1>

<p>Usage:</p>

<pre><code class="language-shell">$ funnel --config funnel.config.yaml [server | worker | ... ]
</code></pre>

<p>Below is a YAML config file containing all the possible options and default values.<br />
(Note: the config is still a mess, but we&rsquo;re working on improving it)</p>

<pre><code class="language-YAML"># Path to the database file.
DBPath: ./funnel-work-dir/funnel.db
# Port used for HTTP communication and the web dashboard.
HTTPPort: 8000
# Port used for RPC communication.
RPCPort: 9090
# Working files created during processing will be written in this directory.
WorkDir: ./funnel-work-dir
# Hostname of the Funnel server. Mainly, this is used by auto-scalers
# to configure workers.
HostName: localhost
# Logging levels: debug, info, error
LogLevel: debug
# Write logs to this path. If empty, logs are written to stderr.
LogPath: &quot;&quot;
# Limit the size of task executor logs (stdout/err), in bytes.
MaxExecutorLogSize: 10000 # 10 KB
# How often to run a scheduler iteration.
# In nanoseconds.
ScheduleRate: 1000000000 # 1 second
# How many tasks to schedule in one iteration.
ScheduleChunk: 10
# How long to wait between updates before marking a worker dead.
# In nanoseconds.
WorkerPingTimeout: 60000000000 # 1 minute
# How long to wait for a worker to start, before marking the worker dead.
# In nanoseconds.
WorkerInitTimeout: 300000000000 # 5 minutes
# Include a &quot;Cache-Control: no-store&quot; HTTP header in Get/List responses
# to prevent caching by intermediary services.
DisableHTTPCache: true

# File storage systems.
# This is a list of structs (TODO that's confusing, restructure this config)
Storage:
  # Local file system.
  - Local:
      # Whitelist of local directory paths which Funnel is allowed to access.
      AllowedDirs:
        - ./funnel-work-dir/storage
    #S3:
    #  Endpoint:
    #  Key:
    #  Secret:

     # Google Cloud Storage
     #GS:
      # Path to account credentials file.
      # Optional. If possible, credentials will be automatically discovered
      # from the environment.
     # AccountFile:
      # Automatically discover credentials from the environment.
     # FromEnv: true

# The name of the active scheduler backend
# Available backends: local, condor, gce, openstack
Scheduler: local

# Scheduler backend config
Backends:

  GCE:
    # Path to account credentials file.
    # If possible, this will be automatically discovered.
    AccountFile: &quot;&quot;
    # Google Cloud project ID.
    # If possible, this will be automatically discovered.
    Project: &quot;&quot;
    # Google Cloud zone.
    # If possible, this will be automatically discovered.
    Zone: &quot;&quot;
    Weights:
      # Prefer workers that start up quickly.
      # Workers that are already online have instant startup time.
      PreferQuickStartup: 1.0
    # How long to cache GCE API results (machine list, templates, etc)
    # before refreshing.
    CacheTTL: 60000000000 # 1 minute

Worker:
  # If empty, a worker ID will be automatically generated.
  ID: &quot;&quot;
  # RPC address of the Funnel server
  ServerAddress: localhost:9090
  # Files created during processing will be written in this directory.
  WorkDir: ./funnel-work-dir
  # If the worker has been idle for longer than the timeout, it will shut down.
  # -1 means there is no timeout. 0 means timeout immediately after the first task.
  Timeout: -1
  # Maximum task log (stdout/err) size, in bytes.
  LogTailSize: 10000 # 10 KB

  # File storage systems.
  #
  # This is usually set automatically by the scheduler, but you might need this
  # if you're starting a worker manually.
  Storage:
    # Local file system.
    - Local:
        # Whitelist of local directory paths which Funnel is allowed to access.
        AllowedDirs:
          - ./funnel-work-dir/storage
      #S3:
      #  Endpoint:
      #  Key:
      #  Secret:

       # Google Cloud Storage
       #GS:
        # Path to account credentials file.
        # Optional. If possible, credentials will be automatically discovered
        # from the environment.
       # AccountFile:
        # Automatically discover credentials from the environment.
       # FromEnv: true
  # Logging levels: debug, info, error
  LogLevel: debug
  # Write logs to this path. If empty, logs are written to stderr.
  LogPath: &quot;&quot;
  # Override available resources.
  Resources:
    # CPUs available.
    # Cpus: 0

    # RAM available, in GB.
    # Ram: 0.0

    # Disk space available, in GB.
    Disk: 100.0
  # For low-level tuning.
  # RPC timeout for update/sync call.
  # In nanoseconds.
  UpdateTimeout: 1000000000 # 1 second
  # For low-level tuning.
  # How often to sync with the Funnel server.
  # In nanoseconds.
  UpdateRate: 5000000000 # 5 seconds
  # For low-level tuning.
  # How often to send task log updates to the Funnel server.
  # In nanoseconds.
  LogUpdateRate: 5000000000 # 5 seconds
</code></pre>

  </div>

</div>
</body>
</html>
